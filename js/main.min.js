"use strict";function send(e,t){console.log("Отправка запроса"),e.preventDefault?e.preventDefault():e.returnValue=!1;var n=new XMLHttpRequest;n.open("POST",t,!0),n.onload=function(){var e;200<=n.status&&n.status<400?(e=JSON.parse(this.response),console.log(e),"success"==e.result?($(".form").hide(),$(".note").html("<p>Спасибо! Ваша заявка принята. Мы перезвоним Вам в ближайшее время.</p>")):alert("Ошибка. Сообщение не отправлено")):alert("Ошибка сервера. Номер: ".concat(n.status))},n.onerror=function(){alert("Ошибка отправки запроса")},n.send(new FormData(e.target))}var sandwich=function(){var e=document.querySelector(".sandwich__open-btn"),t=document.querySelector(".sandwich__close-btn"),n=document.querySelector(".sandwich__content"),o=document.querySelector(".sandwich__menu");document.querySelectorAll(".sandwich__nav-link").forEach(function(e){e.addEventListener("click",function(){n.classList.remove("sandwich__content--active"),o.classList.remove("sandwich__menu--opened"),document.body.style.overflow=""})}),e.addEventListener("click",function(){n.classList.add("sandwich__content--active"),o.classList.add("sandwich__menu--opened"),document.body.style.overflow="hidden"}),t.addEventListener("click",function(){n.classList.remove("sandwich__content--active"),o.classList.remove("sandwich__menu--opened"),document.body.style.overflow=""}),n.addEventListener("click",function(){n.classList.remove("sandwich__content--active"),o.classList.remove("sandwich__menu--opened"),document.body.style.overflow=""})},popupLink=function(){var t=document.querySelectorAll(".js-popup-link"),o=document.querySelector("body"),c=document.querySelectorAll(".lock-padding"),s=!0,r=300;if(0<t.length)for(var e=function(e){var n=t[e];n.addEventListener("click",function(e){var t=n.getAttribute("href").replace("#","");!function(e){{var t;e&&s&&((t=document.querySelector(".popup.popup--opened"))?a(t,!1):function(){var e="".concat(window.innerWidth-document.querySelector(".wrapper").offsetWidth,"px");if(0<c.length)for(var t=0;t<c.length;t++){c[t].style.paddingRight=e}o.style.paddingRight=e,o.classList.add("lock"),s=!1,setTimeout(function(){s=!0},r)}(),e.classList.add("popup--opened"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||a(e.target.closest(".popup"))}))}}(document.getElementById(t)),e.preventDefault()})},n=0;n<t.length;n++)e(n);var l=document.querySelectorAll(".close-popup");if(0<l.length)for(var i=0;i<l.length;i++)!function(e){var t=l[e];t.addEventListener("click",function(e){a(t.closest(".popup")),e.preventDefault()})}(i);function a(e,t){var n=!(1<arguments.length&&void 0!==t)||t;s&&(e.classList.remove("popup--opened"),n&&(setTimeout(function(){if(0<c.length)for(var e=0;e<c.length;e++){c[e].style.paddingRight="0px"}o.style.paddingRight="0px",o.classList.remove("lock")},r),s=!1,setTimeout(function(){s=!0},r)))}document.addEventListener("keydown",function(e){27===e.which&&a(document.querySelector(".popup.popup--opened"))}),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)};popupLink(),sandwich();